
(function(){var wapp=angular.module('weatherApp',['ngRoute','ngResource']);wapp.config(function($routeProvider,$locationProvider,$sceDelegateProvider,$httpProvider){$locationProvider.hashPrefix("");$httpProvider.defaults.headers.common['Access-Control-Allow-Headers']='*';$routeProvider.when('/',{templateUrl:'pages/home.html',controller:'homeController'}).when('/forcast',{templateUrl:'pages/forcast.html',controller:'forcastController'});});wapp.service('cityService',function(){this.city='Shiraz';});wapp.controller('homeController',['$scope','$http','$resource','cityService',function($scope,$http,$resource,cityService){$scope.srchCityName=cityService.city;$scope.$watch('srchCityName',function(){cityService.city=$scope.srchCityName;});var ApiKey="ebd7f5b8d7bf5d4f26710c6154bc39a5";var BaseUrl='http://api.openweathermap.org/data/2.5/forecast/daily?APPID='+ApiKey+'&q=London';var req={method:'GET',url:'http://api.openweathermap.org/data/2.5/forecast/daily',params:{APPID:ApiKey,q:'London,us'}};$http(req).then(function(response){console.log(response);$rootScope.data=response.data;}).catch(function(response){console.log(response);});}]);wapp.controller('forcastController',['$scope','cityService',function($scope,cityService){$scope.cityName=cityService.city;}]);})();